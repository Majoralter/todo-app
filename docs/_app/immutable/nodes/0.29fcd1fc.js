import{s as h,c as p,u as g,g as y,d as S,o as w}from"../chunks/scheduler.39b18c20.js";import{S as $,i as b,g as v,h as D,j,f as d,k as A,a as M,d as R,t as T}from"../chunks/index.94dc4c92.js";import{a as C,d as f,b as _,g as O,s as P,c as k}from"../chunks/store.b109ea32.js";const q=!0,B=Object.freeze(Object.defineProperty({__proto__:null,prerender:q},Symbol.toStringTag,{value:"Module"}));function z(n){let s,o;const l=n[1].default,a=p(l,n,n[0],null);return{c(){s=v("main"),a&&a.c(),this.h()},l(e){s=D(e,"MAIN",{class:!0});var t=j(s);a&&a.l(t),t.forEach(d),this.h()},h(){A(s,"class","svelte-eh5yfh")},m(e,t){M(e,s,t),a&&a.m(s,null),o=!0},p(e,[t]){a&&a.p&&(!o||t&1)&&g(a,l,e,e[0],o?S(l,e[0],t,null):y(e[0]),null)},i(e){o||(R(a,e),o=!0)},o(e){T(a,e),o=!1},d(e){e&&d(s),a&&a.d(e)}}}function E(n,s,o){let{$$slots:l={},$$scope:a}=s;const e=["/"];return w(()=>{C.onAuthStateChanged(async t=>{const u=window.location.pathname;if(!t&&!e.includes(u)){window.location.href="/";return}if(t&&u==="/"){window.location.href="/dashboard";return}if(!t)return;let r;const m=f(_,"users",t.uid),c=await O(m);if(c.exists())r=c.data();else{const i=f(_,"users",t.uid);r={email:t.email,todos:[]},await P(i,r,{merge:!0})}k.update(i=>({...i,user:t,data:r,loading:!1}))})}),n.$$set=t=>{"$$scope"in t&&o(0,a=t.$$scope)},[a,l]}class F extends ${constructor(s){super(),b(this,s,E,z,h,{})}}export{F as component,B as universal};
